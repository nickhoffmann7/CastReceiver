<!DOCTYPE html>
<html lang="en">

<head>
    <script type="text/javascript"
            src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js">
    </script>

    <style>
        cast-media-player {
            --progress-color: rgb(120, 0, 46);
            --splash-image: url('loader2.svg');
        }
    </style>
</head>

<body>

<cast-media-player></cast-media-player>

<script>
    const context = cast.framework.CastReceiverContext.getInstance();

    const playerManager = context.getPlayerManager();

    
    playerManager.setMessageInterceptor(
        cast.framework.messages.MessageType.LOAD,
        requestData => {
            requestData.media.hlsVideoSegmentFormat = cast.framework.messages.HlsVideoSegmentFormat.MPEG2_TS;
            return requestData;
        }
    );

    //context.start({playbackConfig: getPlaybackConfig()});
    context.start();

    function getPlaybackConfig() {
        const playbackConfig = new cast.framework.PlaybackConfig();
        
        //playbackConfig.autoPauseDuration = 2;
        playbackConfig.autoResumeDuration = 5;
        //playbackConfig.autoResumeNumberOfSegments = 1;
        //playbackConfig.segmentRequestRetryLimit = 0;
        
        /*
        playbackConfig.manifestRequestHandler = requestInfo => {
            requestInfo.withCredentials = true;
        };
        */
        
        return playbackConfig;
    }
</script>

</body>

</html>
